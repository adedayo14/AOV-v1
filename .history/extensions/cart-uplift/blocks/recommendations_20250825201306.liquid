{% comment %} Cart Uplift â€“ Recommendations Settings {% endcomment %}

{% if block.settings.enable_recommendations %}
  <script>
    (function() {
      // Extend existing CartUpliftSettings with recommendation config
      if (window.CartUpliftSettings) {
        window.CartUpliftSettings = Object.assign(window.CartUpliftSettings, {
          // Recommendation settings
          enableRecommendations: {{ block.settings.enable_recommendations | default: true | json }},
          recommendationLayout: {{ block.settings.recommendation_layout | default: 'column' | json }},
          maxRecommendations: {{ block.settings.max_recommendations | default: 4 | json }},
          recommendationsTitle: {{ block.settings.recommendations_title | default: 'You might also like' | json }},
          
          // Add-on settings  
          enableAddons: {{ block.settings.enable_addons | default: false | json }},
          enableDiscountCode: {{ block.settings.enable_discount_code | default: false | json }},
          enableNotes: {{ block.settings.enable_notes | default: false | json }},
          enableExpressCheckout: {{ block.settings.enable_express_checkout | default: true | json }},
          
          // Analytics
          enableAnalytics: {{ block.settings.enable_analytics | default: false | json }}
        });
        
        console.log('ðŸ›’ Cart Uplift Recommendations Config Applied:', {
          enableRecommendations: window.CartUpliftSettings.enableRecommendations,
          recommendationLayout: window.CartUpliftSettings.recommendationLayout,
          maxRecommendations: window.CartUpliftSettings.maxRecommendations
        });
      } else {
        console.warn('ðŸ›’ Cart Uplift main settings not found. Ensure the main Cart Uplift app embed is enabled.');
      }
    })();
  </script>
{% endif %}

{% schema %}
{
  "name": "Cart Uplift - Recommendations",
  "target": "body",
  "settings": [
    {
      "type": "header",
      "content": "ðŸ“¦ Product Recommendations"
    },
    {
      "type": "checkbox",
      "id": "enable_recommendations",
      "label": "Enable Product Recommendations",
      "default": true,
      "info": "Show recommended products in cart"
    },
    {
      "type": "select",
      "id": "recommendation_layout",
      "label": "Recommendation Layout",
      "default": "column",
      "options": [
        {
          "value": "row",
          "label": "Horizontal Row (Card Style)"
        },
        {
          "value": "column",
          "label": "Vertical List (Compact Style)"
        }
      ]
    },
    {
      "type": "range",
      "id": "max_recommendations",
      "label": "Max Recommendations",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 4
    },
    {
      "type": "text",
      "id": "recommendations_title",
      "label": "Recommendations Title",
      "default": "You might also like",
      "info": "Title shown above recommendations"
    },
    {
      "type": "header",
      "content": "âœ¨ Additional Features"
    },
    {
      "type": "checkbox",
      "id": "enable_addons",
      "label": "Enable Add-ons",
      "default": false,
      "info": "Show add-on products in cart"
    },
    {
      "type": "checkbox",
      "id": "enable_discount_code",
      "label": "Enable Discount Code Field",
      "default": false,
      "info": "Allow customers to enter discount codes"
    }
  ]
}
{% endschema %}
